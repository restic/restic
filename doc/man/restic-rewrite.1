.nh
.TH "restic backup" "1" "Jan 2017" "generated by \fB\fCrestic generate\fR" ""

.SH NAME
.PP
restic-rewrite - Rewrite snapshots to exclude unwanted files


.SH SYNOPSIS
.PP
\fBrestic rewrite [flags] [snapshotID ...]\fP


.SH DESCRIPTION
.PP
The "rewrite" command excludes files from existing snapshots. It creates new
snapshots containing the same data as the original ones, but without the files
you specify to exclude. All metadata (time, host, tags) will be preserved.

.PP
The snapshots to rewrite are specified using the --host, --tag and --path options,
or by providing a list of snapshot IDs. Please note that specifying neither any of
these options nor a snapshot ID will cause the command to rewrite all snapshots.

.PP
The special tag 'rewrite' will be added to the new snapshots to distinguish
them from the original ones, unless --forget is used. If the --forget option is
used, the original snapshots will instead be directly removed from the repository.

.PP
Please note that the --forget option only removes the snapshots and not the actual
data stored in the repository. In order to delete the no longer referenced data,
use the "prune" command.


.SH EXIT STATUS
.PP
Exit status is 0 if the command was successful, and non-zero if there was any error.


.SH OPTIONS
.PP
\fB-n\fP, \fB--dry-run\fP[=false]
	do not do anything, just print what would be done

.PP
\fB-e\fP, \fB--exclude\fP=[]
	exclude a \fB\fCpattern\fR (can be specified multiple times)

.PP
\fB--exclude-file\fP=[]
	read exclude patterns from a \fB\fCfile\fR (can be specified multiple times)

.PP
\fB--forget\fP[=false]
	remove original snapshots after creating new ones

.PP
\fB-h\fP, \fB--help\fP[=false]
	help for rewrite

.PP
\fB-H\fP, \fB--host\fP=[]
	only consider snapshots for this \fB\fChost\fR (can be specified multiple times)

.PP
\fB--iexclude\fP=[]
	same as --exclude \fB\fCpattern\fR but ignores the casing of filenames

.PP
\fB--iexclude-file\fP=[]
	same as --exclude-file but ignores casing of \fB\fCfile\fRnames in patterns

.PP
\fB--path\fP=[]
	only consider snapshots including this (absolute) \fB\fCpath\fR (can be specified multiple times)

.PP
\fB--tag\fP=[]
	only consider snapshots including \fB\fCtag[,tag,...]\fR (can be specified multiple times)


.SH OPTIONS INHERITED FROM PARENT COMMANDS
.PP
\fB--cacert\fP=[]
	\fB\fCfile\fR to load root certificates from (default: use system certificates)

.PP
\fB--cache-dir\fP=""
	set the cache \fB\fCdirectory\fR\&. (default: use system default cache directory)

.PP
\fB--cleanup-cache\fP[=false]
	auto remove old cache directories

.PP
\fB--compression\fP=auto
	compression mode (only available for repository format version 2), one of (auto|off|max)

.PP
\fB--insecure-tls\fP[=false]
	skip TLS certificate verification when connecting to the repository (insecure)

.PP
\fB--json\fP[=false]
	set output mode to JSON for commands that support it

.PP
\fB--key-hint\fP=""
	\fB\fCkey\fR ID of key to try decrypting first (default: $RESTIC_KEY_HINT)

.PP
\fB--limit-download\fP=0
	limits downloads to a maximum \fB\fCrate\fR in KiB/s. (default: unlimited)

.PP
\fB--limit-upload\fP=0
	limits uploads to a maximum \fB\fCrate\fR in KiB/s. (default: unlimited)

.PP
\fB--no-cache\fP[=false]
	do not use a local cache

.PP
\fB--no-lock\fP[=false]
	do not lock the repository, this allows some operations on read-only repositories

.PP
\fB-o\fP, \fB--option\fP=[]
	set extended option (\fB\fCkey=value\fR, can be specified multiple times)

.PP
\fB--pack-size\fP=0
	set target pack \fB\fCsize\fR in MiB, created pack files may be larger (default: $RESTIC_PACK_SIZE)

.PP
\fB--password-command\fP=""
	shell \fB\fCcommand\fR to obtain the repository password from (default: $RESTIC_PASSWORD_COMMAND)

.PP
\fB-p\fP, \fB--password-file\fP=""
	\fB\fCfile\fR to read the repository password from (default: $RESTIC_PASSWORD_FILE)

.PP
\fB-q\fP, \fB--quiet\fP[=false]
	do not output comprehensive progress report

.PP
\fB-r\fP, \fB--repo\fP=""
	\fB\fCrepository\fR to backup to or restore from (default: $RESTIC_REPOSITORY)

.PP
\fB--repository-file\fP=""
	\fB\fCfile\fR to read the repository location from (default: $RESTIC_REPOSITORY_FILE)

.PP
\fB--tls-client-cert\fP=""
	path to a \fB\fCfile\fR containing PEM encoded TLS client certificate and private key

.PP
\fB-v\fP, \fB--verbose\fP[=0]
	be verbose (specify multiple times or a level using --verbose=\fB\fCn\fR, max level/times is 2)


.SH SEE ALSO
.PP
\fBrestic(1)\fP
